{"ast":null,"code":"'use strict';\n\n/**\n * Module dependencies.\n */\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst assert = require('assert');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst {\n  HttpError\n} = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n    if (options.asyncLocalStorage) {\n      const {\n        AsyncLocalStorage\n      } = require('async_hooks');\n      assert(AsyncLocalStorage, 'Requires node 12.17.0 or higher to enable asyncLocalStorage');\n      this.ctxStorage = new AsyncLocalStorage();\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, ['subdomainOffset', 'proxy', 'env']);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' + 'See the documentation for examples of how to convert old middleware ' + 'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      if (!this.ctxStorage) {\n        return this.handleRequest(ctx, fn);\n      }\n      return this.ctxStorage.run(ctx, async () => {\n        return await this.handleRequest(ctx, fn);\n      });\n    };\n    return handleRequest;\n  }\n\n  /**\n   * return currnect contenxt from async local storage\n   */\n  get currentContext() {\n    if (this.ctxStorage) return this.ctxStorage.getStore();\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError = Object.prototype.toString.call(err) === '[object Error]' || err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n  createAsyncCtxStorageMiddleware() {\n    const app = this;\n    return async function asyncCtxStorage(ctx, next) {\n      await app.ctxStorage.run(ctx, async () => {\n        return await next();\n      });\n    };\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n  if (!ctx.writable) return;\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const {\n        length\n      } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;","map":{"version":3,"names":["isGeneratorFunction","require","debug","onFinished","assert","response","compose","context","request","statuses","Emitter","util","Stream","http","only","convert","deprecate","HttpError","module","exports","Application","constructor","options","proxy","subdomainOffset","proxyIpHeader","maxIpsCount","env","process","NODE_ENV","keys","middleware","Object","create","inspect","custom","asyncLocalStorage","AsyncLocalStorage","ctxStorage","listen","args","server","createServer","callback","toJSON","use","fn","TypeError","_name","name","push","listenerCount","on","onerror","handleRequest","req","res","ctx","createContext","run","currentContext","getStore","fnMiddleware","statusCode","err","handleResponse","respond","then","catch","app","originalUrl","url","state","isNativeError","prototype","toString","call","Error","format","status","expose","silent","msg","stack","console","error","replace","default","createAsyncCtxStorageMiddleware","asyncCtxStorage","next","writable","body","code","empty","end","method","headersSent","has","length","Number","isInteger","_explicitNullBody","remove","httpVersionMajor","String","message","type","Buffer","byteLength","isBuffer","pipe","JSON","stringify"],"sources":["C:/Users/ytBad/OneDrive/바탕 화면/all/project/my-app/node_modules/koa/lib/application.js"],"sourcesContent":["\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst assert = require('assert');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst { HttpError } = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n    if (options.asyncLocalStorage) {\n      const { AsyncLocalStorage } = require('async_hooks');\n      assert(AsyncLocalStorage, 'Requires node 12.17.0 or higher to enable asyncLocalStorage');\n      this.ctxStorage = new AsyncLocalStorage();\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      if (!this.ctxStorage) {\n        return this.handleRequest(ctx, fn);\n      }\n      return this.ctxStorage.run(ctx, async() => {\n        return await this.handleRequest(ctx, fn);\n      });\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * return currnect contenxt from async local storage\n   */\n  get currentContext() {\n    if (this.ctxStorage) return this.ctxStorage.getStore();\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError =\n      Object.prototype.toString.call(err) === '[object Error]' ||\n      err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n\n  createAsyncCtxStorageMiddleware() {\n    const app = this;\n    return async function asyncCtxStorage(ctx, next) {\n      await app.ctxStorage.run(ctx, async() => {\n        return await next();\n      });\n    };\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  if (!ctx.writable) return;\n\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const { length } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}